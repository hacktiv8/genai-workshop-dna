<!doctype html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Feedback+</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark" />

    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="stylesheet" href="static/css/pico.min.css" />
    <link rel="stylesheet" href="static/css/pico.colors.min.css" />
    <!-- Place favicon.ico in the root directory -->
  </head>
  <body>
    <!--[if lt IE 8]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
    <![endif]-->
    <body>
      <main class="container">
        <h1>Feedback+</h1>
        <form id="checkForm">
          <fieldset>
            <textarea
              name="feedback"
              id="feedback"
              placeholder="Berikan umpan balik untuk menjadi lebih baik"
              required="required"
            ></textarea>
          </fieldset>

          <button type="submit" id="submit">Kirim</button>
        </form>
        <article class="pico-background-zinc-50">
          Sentiment for feedback.
        </article>
      </main>
      <script>
        console.log("Client side rocks!");
        checkForm.addEventListener("submit", async (e) => {
          e.preventDefault();
          const formData = new FormData(checkForm);
          const feedback = formData.get("feedback");
          submit.disabled = true;
          console.log(feedback);
          const response = await fetch("/api/feedback", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ feedback }),
          });
          const data = await response.json();
          console.log(data);
          submit.disabled = false;
        });
      </script>
    </body>
  </body>
</html>
